{% extends "base.html" %}

{% block title %}Entity Analysis Dashboard{% endblock %}

{% block extra_js %}
    <script src="{{ url_for('static', filename='js/dashboard.js') }}" defer></script>
{% endblock %}

{% block content %}
    <!-- Content Grid -->
    <div class="content-grid">
        <!-- Main Chart Section -->
        <div class="chart-section">
            <h1>Top Entities</h1>
            <div class="chart-container">
                <div id="topEntities" class="chart"></div>
            </div>

            <h1>Entity Mention Overtime</h1>
            <div class="chart-container">
                <div id="mentionsTime" class="chart"></div>
            </div>
            
            <h1>Entity Types Distribution</h1>
            <div class="chart-container">
                <div id="entityDist" class="chart"></div>
            </div>

            <h1>Entity Types Distribution</h1>
            <div class="chart-container">
                <div class="entity-table">
                    <div class="table-header">
                        <span>Entity</span>
                        <span>Type</span>
                        <span>Mentions</span>
                    </div>
                    {% for entity in entity_list %}
                    <div class="table-row">
                        <span>{{ entity.Entity }}</span>
                        <span>{{ entity.Type }}</span>
                        <span>{{ entity.Mentions }}</span>
                    </div>
                    {% endfor %}
                    <div class="pagination">
                        <a href="#" class="prev" onclick="handlePagination('prev')">Previous</a>
                        <div class="pages">
                            <a href="#" class="active">1</a>
                            <a href="#">2</a>
                            <a href="#">3</a>
                            <a href="#">4</a>
                        </div>
                        <a href="#" class="next" onclick="handlePagination('next')">Next</a>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Filter Section -->
        <div class="filter-section">
            <h2>Filter</h2>
            <div class="filter-content">
                <div class="filter-group">
                    <label>Entity Type</label>
                    <input type="text" placeholder="All Types" class="filter-input" data-filter="entityType">
                </div>
                <div class="filter-group">
                    <label>Select top k entities</label>
                    <input type="range" min="0" max="40" class="filter-range" data-filter="mentions">
                </div>
            </div>
        </div>
    </div>

    <!-- Hidden container for charts data -->
    <div id="chartsData" data-charts='{{ graphJSON | safe }}' style="display: none;"></div>
{% endblock %}